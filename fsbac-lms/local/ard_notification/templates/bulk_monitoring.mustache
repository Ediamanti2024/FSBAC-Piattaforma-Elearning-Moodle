{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}

<div class="path-local-ard_notification">
    <h2>{{#str}}bulkmonitoring, local_ard_notification{{/str}}</h2>
    <!-- Search Bar -->
    {{> local_ard_notification/partials/searchbar_bulk }}
    {{#hasbulks}}
        <!-- Pagination -->
        {{> local_ard_notification/partials/pagination }}
        <!-- Bulks -->
        <div class="table-responsive-lg table-striped">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">{{#str}}bulkname, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}bulkcreatedby, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}bulkscheduletime, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}bulkstatus, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}bulknotes, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}message, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}messagesenderalias, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}messagelanguage, local_ard_notification{{/str}}</th>
                        <th scope="col">{{#str}}actions{{/str}}</th>
                    </tr>
                </thead>
                <tbody>
                    {{#bulks}}
                        <tr>
                            <!-- Bulk Name -->
                            <td>{{ bulkname }}</td>
                            <!-- Bulk Created By -->
                            <td>
                                <a href="{{ config.wwwroot }}/user/profile.php?id={{ bulkcreatedbyid }}" title="{{ bulkcreatedby }}" alt="{{ bulkcreatedby }}">
                                    {{ bulkcreatedby }}
                                </a>
                            </td>
                            <!-- Bulk Schedule Time -->
                            <td>
                                {{ bulkscheduletime }}
                            </td>
                            <!-- Bulk Status -->
                            <td>
                                <span class="badge badge-{{ bulkstatus.color }}">
                                    {{ bulkstatus.label }}
                                </span>
                            </td>
                            <!-- Bulk Notes -->
                            <td>
                                <button type="button" class="btn btn-outline-primary my-2 my-sm-0" data-toggle="popover" title="{{#str}}bulknotes, local_ard_notification{{/str}}" data-content="{{ bulknotes }}" data-html="true">
                                    {{#str}}view{{/str}}
                                </button>
                            </td>
                            <!-- Message -->
                            <td>
                                <button type="button" class="btn btn-outline-primary my-2 my-sm-0" data-toggle="popover" title="{{ messagesubject }}" data-content="{{ messagebody }}" data-html="true">
                                    {{#str}}preview{{/str}}
                                </button>
                            </td>
                            <!-- Message Sender Alias -->
                            <td>{{ messagesenderalias }}</td>
                            <!-- Message Language -->
                            <td>{{ messagelanguage }}</td>
                            <!-- Actions -->
                            <td>
                                <!-- Send Test -->
                                <a {{#enablesendtest}}href="{{ config.wwwroot }}/local/ard_notification/send_message_now.php?bulkid={{ bulkid }}&userid={{ myuserid }}&sendtest=1"{{/enablesendtest}} class="bulk-action" title="{{#str}}sendtest, local_ard_notification{{/str}}" alt="{{#str}}sendtest, local_ard_notification{{/str}}">
                                    <svg class="svg-icon {{#enablesendtest}}enabled{{/enablesendtest}}{{^enablesendtest}}disabled{{/enablesendtest}}">
                                        <use xlink:href="{{ config.wwwroot }}/local/ard_notification/icons/sprite.svg#envelope-open-text"></use>
                                    </svg>
                                </a>
                                <!-- Bulk Users Monitoring -->
                                <a href="{{ config.wwwroot }}/local/ard_notification/bulk_users_monitoring.php?bulkid={{ bulkid }}" class="bulk-action" title="{{#str}}bulkusers, local_ard_notification{{/str}}" alt="{{#str}}bulkusers, local_ard_notification{{/str}}">
                                    <svg class="svg-icon enabled">
                                        <use xlink:href="{{ config.wwwroot }}/local/ard_notification/icons/sprite.svg#users"></use>
                                    </svg>
                                </a>
                                <!-- Copy -->
                                <a href="{{ config.wwwroot }}/local/ard_notification/copy_bulk.php?id={{ bulkid }}" class="bulk-action" title="{{#str}}copy, local_ard_notification{{/str}}" alt="{{#str}}copy, local_ard_notification{{/str}}">
                                    <svg class="svg-icon enabled">
                                        <use xlink:href="{{ config.wwwroot }}/local/ard_notification/icons/sprite.svg#copy"></use>
                                    </svg>
                                </a>
                                <!-- Edit -->
                                <a href="{{ config.wwwroot }}/local/ard_notification/schedule_bulk.php?id={{ bulkid }}" class="bulk-action" title="{{#str}}edit{{/str}}" alt="{{#str}}edit{{/str}}">
                                    <svg class="svg-icon enabled">
                                        <use xlink:href="{{ config.wwwroot }}/local/ard_notification/icons/sprite.svg#pencil"></use>
                                    </svg>
                                </a>
                                <!-- Delete -->
                                <a href="{{ config.wwwroot }}/local/ard_notification/delete_bulk.php?id={{ bulkid }}" class="bulk-action" title="{{#str}}delete{{/str}}" alt="{{#str}}delete{{/str}}">
                                    <svg class="svg-icon enabled">
                                        <use xlink:href="{{ config.wwwroot }}/local/ard_notification/icons/sprite.svg#trash"></use>
                                    </svg>
                                </a>
                            </td>
                        </tr>
                    {{/bulks}}
                </tbody>
            </table>
        </div>
        <!-- Pagination -->
        {{> local_ard_notification/partials/pagination }}
    {{/hasbulks}}
    <!-- No results -->
    {{^hasbulks}}
        <div class="row">
            <div class="col-12 my-3">
                {{#str}}nobulkfound, local_ard_notification{{/str}}
            </div>
        </div>
    {{/hasbulks}}
</div>
